{
  "version": 2,
  "installCommand": "npm install",
  "buildCommand": "npm run build", // This runs your full build script from package.json

  "builds": [
    {
      "src": "dist/index.js",       // The compiled server code in the root 'dist' folder
      "use": "@vercel/node"
    },
    {
      "src": "dist/**",             // All other files in the root 'dist' folder (your frontend)
      "use": "@vercel/static"
    }
  ],

  "routes": [
    {
      "src": "/api/(.*)",
      "dest": "dist/index.js"       // Route all /api requests to your compiled serverless function
    },
    {
      "src": "/(.*)",
      "dest": "dist/index.html"     // Route all other requests to index.html for client-side routing
    }
  ]
}
